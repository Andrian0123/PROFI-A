# Подготовка приложения к загрузке на Google Drive

Инструкция: как собрать APK, загрузить на Google Drive и поделиться ссылкой с друзьями для установки и тестирования.

---

## 1. Что уже подключено перед публикацией

- **Сканер помещения (3D)** — экран «Сканирование» из формы комнаты (Фото 3D → Создать). Определение размеров по фото/кадру; при наличии сервера — отправка на `SCAN_SERVER_URL`.
- **Сканер документов** — в меню приложения: **Документы → Сканер документов**. Выбор фото документа → размеры (мм) и распознавание содержимого (сервер по тому же `SCAN_SERVER_URL`, endpoint `/api/v1/scan/document`).

Оба сканера работают с локальным или облачным сервером (см. `docs/ИНТЕГРАЦИЯ_СКАНЕРА.md`, `docs/КАК_ПОДКЛЮЧИТЬ_СЕРВЕР_СКАНИРОВАНИЯ.md`). Если сервер не настроен, приложение использует локальные/заглушечные данные.

---

## 2. Сборка APK для распространения

### Вариант A: Debug-APK (быстро, для друзей)

1. Откройте проект в Android Studio или в папке проекта выполните:
   ```bat
   СБОРКА_ПРИЛОЖЕНИЯ.bat
   ```
   или в PowerShell:
   ```powershell
   .\СБОРКА_ПРИЛОЖЕНИЯ.ps1
   ```
2. Готовый файл:
   ```
   app\build\outputs\apk\debug\app-debug.apk
   ```
3. Для удобства скопируйте его в папку для загрузки и переименуйте, например:
   ```
   PROFI-A-1.0.0-debug.apk
   ```
   Версию возьмите из `app/build.gradle.kts` (`versionName`).

### Вариант B: Release-APK (подпись, для более «официальной» раздачи)

1. Настройте подпись (keystore) в `app/build.gradle.kts` (signingConfigs) и укажите `buildTypes.release.signingConfig`.
2. Выполните:
   ```bat
   gradlew.bat assembleRelease --no-daemon
   ```
3. APK будет в:
   ```
   app\build\outputs\apk\release\app-release.apk
   ```
   Переименуйте, например: `PROFI-A-1.0.0.apk`.

---

## 3. Загрузка на Google Drive

1. Зайдите на [drive.google.com](https://drive.google.com).
2. Создайте папку, например «ПРОФЙ-А — для тестировщиков».
3. Загрузите в неё файл APK (например `PROFI-A-1.0.0-debug.apk`).
4. Щёлкните по файлу правой кнопкой → **Настройки доступа** (или «Поделиться»).
5. Укажите **«Доступ по ссылке»** и выберите уровень доступа:
   - **«Все, у кого есть ссылка»** — друзья смогут только скачать по ссылке.
6. Скопируйте ссылку и отправьте её друзьям.

При необходимости можно добавить краткий текст в описание файла на Drive, например: «ПРОФЙ-А, тестовая сборка. Установка: разрешить установку из неизвестных источников.»

---

## 4. Инструкция для друзей (установка APK)

Кратко напишите друзьям:

1. **Скачать APK** по вашей ссылке с Google Drive (кнопка «Скачать» или «Загрузить»).
2. **Разрешить установку из неизвестных источников** для браузера или «Файлов» (Настройки → Безопасность / Приложения → Специальный доступ → Установка неизвестных приложений).
3. **Открыть скачанный файл** и подтвердить установку.
4. После установки запустить **ПРОФЙ-А** с главного экрана или списка приложений.

При первом запуске можно войти или использовать демо-режим. Сканер помещения доступен при добавлении/редактировании комнаты (кнопка «Фото 3D» → «Создать»). Сканер документов — в меню: **Меню → Документы → Сканер документов**.

---

## 5. Конфигурация URL для друзей (опционально)

Если друзья будут использовать ваш общий сервер (авторизация, поддержка, сканирование), в приложении уже заданы URL в `app/build.gradle.kts`:

- Для эмулятора: `http://10.0.2.2:3001` (auth), `10.0.2.2:3002` (support), `10.0.2.2:3003` (scan).
- Для раздачи друзьям лучше собрать отдельный вариант сборки с вашим облачным URL (например один базовый URL для auth/support/scan) и распространять этот APK. Либо оставить пустые/локальные URL — тогда приложение работает офлайн/с заглушками.

Подробнее: `docs/ПОШАГОВОЕ_ПОДКЛЮЧЕНИЕ_СЕРВИСОВ.md`, `docs/ИНТЕГРАЦИЯ_СКАНЕРА.md`.

---

## 6. Краткий чек-лист перед загрузкой

- [ ] Собрать APK (`СБОРКА_ПРИЛОЖЕНИЯ.ps1` или `assembleRelease`).
- [ ] Переименовать в понятное имя с версией (например `PROFI-A-1.0.0-debug.apk`).
- [ ] Загрузить файл в папку на Google Drive.
- [ ] Выдать доступ по ссылке и скопировать ссылку.
- [ ] Отправить друзьям ссылку и короткую инструкцию по установке (п. 4 выше).
