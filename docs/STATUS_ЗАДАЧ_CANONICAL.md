# Единый статус задач PROFI-A (canonical)

**Дата актуализации:** 21.02.2026  
**Источник:** объединение отчётов; стратегия — PROFI-A Future-Generation Strategy (горизонты A/B/C).

Этот документ — **единственный источник истины** по статусу задач. Остальные отчёты (`ОТЧЁТ_ВЫПОЛНЕННЫХ_ЗАДАЧ.md`, `ОТЧЁТ_НЕВЫПОЛНЕННЫХ_ЗАДАЧ.md`, `docs/ОТЧЁТ_ЧЕГО_НЕ_ХВАТАЕТ.md`, `ОТЧЁТ_ЗАДАЧИ.md`, `ОТЧЁТ_ПОЛНОЙ_ПРОВЕРКИ_ПРОЕКТА_2026-02-18.md`) считаются снимками на дату создания; при расхождении приоритет у данного файла.

---

## Выполнено (ядро продукта)

- **Auth и аккаунт:** login/register через API с сохранением сессии в DataStore; смена пароля, 2FA, удаление аккаунта через API с заголовком Authorization; **сброс пароля** (request-reset + reset-password на backend, экраны «Забыли пароль?» → запрос кода → новый пароль); выход (logout) с очисткой сессии; сплэш переходит на HOME при наличии сессии (21.02.2026).
- **Комната (AddRoomScreen):** виды работ по разделам, редактирование позиций, подстановка площадей (потолок/стены/пол), единицы измерения, общая сумма комнаты, калькулятор в шапке, загрузка 3D-файла (meshPath), подстановка площади пола из 3D-скана.
- **Смета:** разбивка по помещениям, предварительная и итоговая смета, «Поделиться» (PDF/CSV), создание промежуточной сметы (выбор позиций → акт).
- **Акты:** список по проекту, просмотр, редактирование позиций в акте, экспорт PDF/CSV.
- **КС-2/КС-3:** блок в профиле для ИП/ООО, формирование PDF/CSV с реквизитами и данными акта.
- **Экспорт:** EstimateExport, Ks2Ks3Export, FileProvider, данные заказчика/исполнителя в PDF/CSV.
- **БД:** проекты, комнаты, виды работ, акты (миграции 3→4, 4→5), RoomScan (сущность, DAO, экран).
- **Шаблоны работ:** WorkTemplate (DataStore), WorkCategoryScreen, подстановка в комнату по разделам.
- **Локализация:** RU/EN и др.; часть строк сметы/актов/диалогов в ресурсах.
- **Горизонт A (20.02.2026):** цветовые токены — единый source-of-truth в `Color.kt`, `colors.xml` синхронизирован с палитрой (тёмный оливковый/тёмно-зелёный).

---

## Открытые задачи (по приоритету)

### Критичный (Горизонт B)

| Блок | Что не сделано | Файлы |
|------|----------------|-------|
| 3D-сканирование | Экран отметки участков на плане; полная визуализация web_lines/missing_zones (retry, сообщения об ошибках и отображение % покрытия — выполнено 21.02.2026) | RoomScanScreen.kt |

### Средний приоритет

| Блок | Что не сделано | Файлы |
|------|----------------|-------|
| Локализация | Оставшиеся hardcoded в ProfileScreen и др. (секции AddRoomScreen — выполнено 21.02.2026) | несколько экранов |

**Выполнено 21.02.2026:** Reset password; Поддержка через API; Виды работ — контент вкладок; Этапы; **локализация** — AboutScreen, WorksScreen (цены), **AddRoomScreen (секции видов работ: ключи ceiling/walls/floor/… + sectionDisplayName + миграция старых категорий)** вынесены в strings; **3D-скан** — отображение процента покрытия (coverage) на экране размеров; **доступность** — contentDescription на кнопках (сохранить размеры, выбрать фото, прикрепить файл, добавить).

---

## Сборка и качество

- **Цвета:** все UI-цвета из токенов темы (`Color.kt` → MaterialTheme / XML). Прямые хексы в экранах запрещены (Quality Gate).
- **Сборка:** при наличии JAVA_HOME выполнять `gradlew assembleDebug`; предупреждения kapt/Dagger/Room не блокируют, если компиляция успешна. Baseline предупреждений — по необходимости.

---

## Ссылки на отчёты (исторические)

- Выполненные: `ОТЧЁТ_ВЫПОЛНЕННЫХ_ЗАДАЧ.md`, `ОТЧЁТ_ЗАДАЧИ.md`
- Невыполненные: `ОТЧЁТ_НЕВЫПОЛНЕННЫХ_ЗАДАЧ.md`, `docs/ОТЧЁТ_ЧЕГО_НЕ_ХВАТАЕТ.md`
- Проверка: `ОТЧЁТ_ПОЛНОЙ_ПРОВЕРКИ_ПРОЕКТА_2026-02-18.md`

Обновления статуса вносить в этот файл; при крупных релизах можно обновить и остальные отчёты по нему.
