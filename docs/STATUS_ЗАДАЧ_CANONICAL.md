# Единый статус задач PROFI-A (canonical)

**Дата актуализации:** 22.02.2026  
**Источник:** объединение отчётов; стратегия — PROFI-A Future-Generation Strategy (горизонты A/B/C).

Этот документ — **единственный источник истины** по статусу задач. Остальные отчёты (`ОТЧЁТ_ВЫПОЛНЕННЫХ_ЗАДАЧ.md`, `ОТЧЁТ_НЕВЫПОЛНЕННЫХ_ЗАДАЧ.md`, `docs/ОТЧЁТ_ЧЕГО_НЕ_ХВАТАЕТ.md`, `ОТЧЁТ_ЗАДАЧИ.md`, `ОТЧЁТ_ПОЛНОЙ_ПРОВЕРКИ_ПРОЕКТА_2026-02-18.md`) считаются снимками на дату создания; при расхождении приоритет у данного файла.

---

## Выполнено (ядро продукта)

- **Auth и аккаунт:** login/register через API с сохранением сессии в DataStore; смена пароля, 2FA, удаление аккаунта через API с заголовком Authorization; **сброс пароля** (request-reset + reset-password на backend, экраны «Забыли пароль?» → запрос кода → новый пароль); выход (logout) с очисткой сессии; сплэш переходит на HOME при наличии сессии (21.02.2026).
- **Комната (AddRoomScreen):** виды работ по разделам, редактирование позиций, подстановка площадей (потолок/стены/пол), единицы измерения, общая сумма комнаты, калькулятор в шапке, загрузка 3D-файла (meshPath), подстановка площади пола из 3D-скана.
- **Смета:** разбивка по помещениям, предварительная и итоговая смета, «Поделиться» (PDF/CSV), создание промежуточной сметы (выбор позиций → акт).
- **Акты:** список по проекту, просмотр, редактирование позиций в акте, экспорт PDF/CSV.
- **КС-2/КС-3:** блок в профиле для ИП/ООО, формирование PDF/CSV с реквизитами и данными акта.
- **Экспорт:** EstimateExport, Ks2Ks3Export, FileProvider, данные заказчика/исполнителя в PDF/CSV.
- **БД:** проекты, комнаты, виды работ, акты (миграции 3→4, 4→5), RoomScan (сущность, DAO, экран).
- **Шаблоны работ:** WorkTemplate (DataStore), WorkCategoryScreen, подстановка в комнату по разделам.
- **Локализация:** RU/EN и др.; часть строк сметы/актов/диалогов в ресурсах. **ProfileScreen (22.02.2026):** вынесены list_item_chevron, profile_nav_to_change_password, profile_empty_placeholder; нейтральное сообщение при смене пароля (fallback — profile_nav_to_change_password).
- **Горизонт A (20.02.2026):** цветовые токены — единый source-of-truth в `Color.kt`, `colors.xml` синхронизирован с палитрой (тёмный оливковый/тёмно-зелёный).

---

## Открытые задачи (по приоритету)

### Критичный (Горизонт B)

| Блок | Что не сделано | Файлы |
|------|----------------|-------|
| 3D-сканирование | Интеграция разметки зон с бэкендом (опционально). **Выполнено 22.02.2026:** экран ручной отметки участков на плане (шаг MARK_ZONES: сетка 4×4, типы пол/стена/потолок/проём, кнопка «Готово»); визуализация web_lines/missing_zones; retry при ошибке уже был (кнопка «Повторить») | RoomScanScreen.kt, ScanProcessingApi.kt |

### Средний приоритет

| Блок | Что не сделано | Файлы |
|------|----------------|-------|
| Локализация | По необходимости в новых экранах | Основные экраны вынесены в strings (в т.ч. KS2, KS3, Acts, GeneralEstimate — PDF/Excel, content_desc Выбрано/Выбрать) | — |

**Выполнено 22.02.2026 (очередь):** Локализация ActsScreen и GeneralEstimateScreen: подписи форматов экспорта (PDF, Excel (CSV)) через export_format_pdf/export_format_csv; contentDescription «Выбрано»/«Выбрать» (content_desc_selected, content_desc_select) в GeneralEstimateScreen.  
**Выполнено 22.02.2026 (очередь):** Локализация **KS2Screen** (заголовок, форма КС-2, номер/дата/период, ИТОГО/НДС/ВСЕГО к оплате, диалог позиции: № п/п, наименование, шифр, ед. изм., количество, цена, сумма, отмена, сохранить). Локализация **KS3Screen** (справка КС-3, форма, договор подряда, от, колонки наименование/с начала/за период, строительно-монтажные работы, ИТОГО, НДС, ВСЕГО к оплате). Строки добавлены в values и values-en.  
**Выполнено 22.02.2026 (пошагово):** Локализация ErrorSnackbar (close), SubscriptionScreen (пробный период, планы, промокод, подтверждение, подписка оформлена/ошибка, оформить, отмена, выбрать), FormKs2Ks3Screen (реквизиты, тосты). Экран разметки плана 3D (MARK_ZONES): сетка 4×4, типы зон пол/стена/потолок/проём, кнопка «Готово».  
**Выполнено 22.02.2026:** ProfileScreen — сообщение после смены пароля (нейтральная подсказка profile_nav_to_change_password при отсутствии перехода); локализация пунктов меню (list_item_chevron), строки profile_empty_placeholder.  
**Выполнено 21.02.2026:** Reset password; Поддержка через API; Виды работ — контент вкладок; Этапы; **локализация** — AboutScreen, WorksScreen (цены), **AddRoomScreen (секции видов работ: ключи ceiling/walls/floor/… + sectionDisplayName + миграция старых категорий)** вынесены в strings; **3D-скан** — отображение процента покрытия (coverage) на экране размеров; **доступность** — contentDescription на кнопках (сохранить размеры, выбрать фото, прикрепить файл, добавить).

---

## Сборка и качество

- **Цвета:** все UI-цвета из токенов темы (`Color.kt` → MaterialTheme / XML). Прямые хексы в экранах запрещены (Quality Gate).
- **Сборка:** при наличии JAVA_HOME выполнять `gradlew assembleDebug`; предупреждения kapt/Dagger/Room не блокируют, если компиляция успешна. Baseline предупреждений — по необходимости.

---

## Ссылки на отчёты (исторические)

- Выполненные: `ОТЧЁТ_ВЫПОЛНЕННЫХ_ЗАДАЧ.md`, `ОТЧЁТ_ЗАДАЧИ.md`
- Невыполненные: `ОТЧЁТ_НЕВЫПОЛНЕННЫХ_ЗАДАЧ.md`, `docs/ОТЧЁТ_ЧЕГО_НЕ_ХВАТАЕТ.md`
- Проверка: `ОТЧЁТ_ПОЛНОЙ_ПРОВЕРКИ_ПРОЕКТА_2026-02-18.md`

Обновления статуса вносить в этот файл; при крупных релизах можно обновить и остальные отчёты по нему.
