# Бесплатные сервисы для тестирования ПРОФЙ-А

Краткий список сервисов с бесплатным тарифом, которые можно **временно** подключить на этапе тестирования вместо своих серверов. В приложении задаются через `BuildConfig` в `app/build.gradle.kts`.

**Пошаговая инструкция подключения:** [ПОШАГОВОЕ_ПОДКЛЮЧЕНИЕ_СЕРВИСОВ.md](ПОШАГОВОЕ_ПОДКЛЮЧЕНИЕ_СЕРВИСОВ.md) — от локального запуска до деплоя в Render.  
**Следующий бесплатный сервис (облачный backend):** в корне проекта — [ПОДКЛЮЧЕНИЕ_СЛЕДУЮЩЕГО_СЕРВИСА.md](../ПОДКЛЮЧЕНИЕ_СЛЕДУЮЩЕГО_СЕРВИСА.md).

---

## 1. Что нужно приложению

| BuildConfig | Назначение | Нужен для тестов |
|-------------|------------|-------------------|
| **AUTH_SERVER_URL** | Логин, регистрация, смена пароля, 2FA, удаление аккаунта | Опционально (при пустом — демо-логин без сети) |
| **SUPPORT_SERVER_URL** | Отправка обращений в поддержку | Опционально (при пустом — открывается почтовый клиент) |
| **SCAN_SERVER_URL** | Обработка скана помещения (Python) | Для проверки скана; при пустом — локальные заглушки |
| **VERIFICATION_SERVER_URL** | Верификация покупок Google Play | Для продакшена; при пустом — активация только по ответу с устройства |

Контракты API: [BACKEND_API_CONTRACTS.md](BACKEND_API_CONTRACTS.md).

---

## 2. Вариант «всё локально» (без облака)

Уже есть в проекте:

- **Папка `server/`** — эталонный Node.js backend (Auth на 3001, Support на 3002, Scan-заглушка на 3003).
- Запуск: `cd server && node server.js`.
- В эмуляторе: `AUTH_SERVER_URL = "http://10.0.2.2:3001"`, аналогично 3002, 3003.

Плюсы: бесплатно, без регистрации, полный контроль. Минусы: работает только при запущенном ПК и в одной сети с устройством/эмулятором.

---

## 3. Бесплатные облачные сервисы для тестирования

### 3.1 Хостинг backend (Auth + Support + при желании верификация)

Подойдут для размещения вашего кода (например, доработанного `server/` или отдельного API):

| Сервис | Бесплатный тариф | Ограничения | Подходит для |
|--------|------------------|-------------|--------------|
| **Railway** | $5 кредитов/мес | Ограниченные часы работы | Node.js (Auth, Support), можно несколько сервисов |
| **Render** | Free tier | Усыпает через ~15 мин неактивности, холодный старт | Node.js, один инстанс на сервис |
| **Fly.io** | Небольшой free allowance | Лимиты по ресурсам | Node.js, Docker |
| **Vercel** | Free (Serverless) | Лимиты вызовов, холодный старт | Serverless-функции (Auth/Support как отдельные endpoints) |
| **Supabase** | Free tier | 500 MB БД, 50k MAU | Готовая Auth + БД; нужна обёртка под ваши пути `/auth/login`, `/support/tickets` |
| **Firebase** | Free tier | Квоты на Auth, Functions | Firebase Auth + Cloud Functions под контракт API |

Рекомендация для быстрого теста: **Render** или **Railway** — залить Node-сервер из `server/`, получить HTTPS-URL и прописать его в `AUTH_SERVER_URL` и `SUPPORT_SERVER_URL` (можно один бэкенд на два пути или два сервиса).

### 3.2 Скан помещения (Python)

Сервис по контракту `SCAN_SERVER_URL`: `POST /api/v1/scan/process`, `POST /api/v1/scan/finish`.

| Сервис | Бесплатный тариф | Замечание |
|--------|------------------|-----------|
| **Render** | Free (Web Service) | Можно поднять Python (Flask/FastAPI), усыпает при неактивности |
| **Railway** | В рамках кредитов | Python-контейнер |
| **Google Cloud Run** | Free tier (миллионы запросов в месяц) | Нужен Docker-образ, холодный старт |
| **Hugging Face Spaces** | Free (в т.ч. для ML) | Удобно, если скан использует ML-модели |

Для теста без реальной обработки можно оставить **локальный Python** или заглушку на Render/Railway, отдающую тестовые dimensions.

### 3.3 Верификация покупок (VERIFICATION_SERVER_URL)

На время теста можно оставить **пустым** — подписка будет активироваться по ответу Google Play на устройстве без серверной проверки. Когда понадобится сервер:

- Тот же **Render / Railway / Vercel** с endpoint’ом `POST /verify` по контракту.
- Для продакшена потом — свой VPS или облако с вызовом Google Play Developer API.

### 3.4 Дополнительно (не обязательно для контракта BuildConfig)

| Задача | Бесплатный сервис |
|--------|--------------------|
| Краши и ошибки | **Firebase Crashlytics**, **Sentry** (free tier) |
| Аналитика | **Firebase Analytics** |
| Рассылка писем (если поддержка шлёт email) | **SendGrid**, **Resend**, **Mailgun** (free tier с лимитами) |

---

## 4. Что прописать в приложении

В `app/build.gradle.kts` в блоке `defaultConfig` (или в `buildTypes.debug` для тестов):

```kotlin
buildConfigField("String", "AUTH_SERVER_URL", "\"https://your-app.onrender.com\"")
buildConfigField("String", "SUPPORT_SERVER_URL", "\"https://your-app.onrender.com\"")
buildConfigField("String", "SCAN_SERVER_URL", "\"\"")
buildConfigField("String", "VERIFICATION_SERVER_URL", "\"\"")
```

Если Auth и Support на одном хосте (как в `server/`), но на разных портах, в Render/Railway обычно поднимают два сервиса и получают два URL. Для одного бэкенда с разными путями (`/auth/*`, `/support/*`) — один URL для обоих.

---

## 5. Итог

- **Минимум для теста:** локальный `server/` + эмулятор с `10.0.2.2:3001/3002/3003` — уже бесплатно и без регистрации.
- **Тест через интернет:** развернуть backend на **Render** или **Railway**, получить HTTPS-URL, прописать в `AUTH_SERVER_URL` и `SUPPORT_SERVER_URL`.
- **Скан:** оставить пустой `SCAN_SERVER_URL` (заглушки в приложении) или поднять Python на Render/Railway/Cloud Run.
- **Верификация покупок:** на этапе теста оставить `VERIFICATION_SERVER_URL` пустым.

После окончания тестирования URL можно сменить на продакшен-сервера или снова обнулить для локальной разработки.
