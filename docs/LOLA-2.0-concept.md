# LOLA 2.0 — Концепт приложения

Концепция, бизнес-рамка, ТЗ и структура экранов для «Твоего внутреннего театра».

---

## 1. Бизнес-план (кратко)

### Продукт
- **Название:** LOLA (или LOLA 2.0).
- **Суть:** Приложение с AI-персонажами для диалогов и самопознания. Пользователь выбирает, с кем поговорить (психолог, коуч, поэт, астролог и т.д. — команда из 30+ персонажей).
- **ЦА:** Люди, интересующиеся саморазвитием, психологией, эзотерикой, креативом; готовы платить за «разговор с собой» в безопасной и интересной форме.

### Монетизация
| Тариф | Ограничения | Цена |
|-------|-------------|------|
| Бесплатно | 3 персонажа, 10 сообщений/день | $0 |
| Премиум (месяц) | Все персонажи, безлимит | $9.99/мес |
| Премиум (год) | То же + экономия | $79.99/год (~33% скидка) |

### Ключевые метрики
- Регистрации, конверсия в подписку (цель: 5–10% на пробном периоде).
- Удержание: 36% через год на годовой подписке (ориентир из трендов).
- LTV, CAC, время в приложении, количество диалогов на пользователя.

### Этапы
1. **MVP:** 5–10 персонажей, чат, базовая оплата (подписка), онбординг.
2. **Рост:** Расширение до 30+ персонажей, «Совет директоров» (3 персонажа), история и инсайты.
3. **Масштаб:** Свой персонаж, интеграции (календарь настроения, экспорт), партнёрства (психологи, коучи).

### Риски и митигация
- **Конкуренция (Replika, Character.AI и др.):** Упор на качество персонажей, чёткие роли, «команда экспертов», а не один бот.
- **Модерация и безопасность:** Правила использования, фильтры контента, при серьёзных запросах — рекомендация специалиста.
- **Зависимость от API LLM:** Заложить в себестоимость и тестировать альтернативные провайдеры.

---

## 2. Техническое задание (каркас)

### Функциональные блоки

| Блок | Описание |
|------|----------|
| **Аутентификация** | Регистрация/вход (email, соцсети, Apple/Google). Восстановление пароля. |
| **Онбординг** | 2–4 экрана: что такое LOLA, выбор 1–3 любимых тем/персонажей, запрос разрешений (уведомления — опционально). |
| **Главный экран** | Список/сетка персонажей по категориям (мышление, бизнес, отношения, здоровье, творчество и т.д.). Поиск и избранное. |
| **Чат** | Диалог с выбранным персонажем. **Ввод:** текст вручную или кнопка **Микрофон** → голос распознаётся и подставляется в поле как текст (можно править перед отправкой). **Ответ:** пользователь выбирает формат — только текст или воспроизведение ответа голосом (TTS). История сообщений в рамках сессии. |
| **Профиль персонажа** | Имя, роль, цвет, короткое описание. Кнопка «Начать разговор». |
| **Подписка и пейволл** | Экран тарифов (Free / Monthly / Yearly). Пробный период (7–14 дней). Восстановление покупок. Ограничение: после N сообщений/день показ пейволла. |
| **Настройки** | Учётная запись, подписка, уведомления, язык, тема (светлая/тёмная), удаление аккаунта. |
| **История (премиум)** | Список прошлых диалогов по персонажам и датам. Просмотр и при необходимости экспорт. |
| **«Совет директоров» (премиум)** | Выбор 3 персонажей; один запрос — ответы от всех троих в одном экране (или по очереди). |

### Нефункциональные требования
- **Платформы:** iOS, Android (на первом этапе можно один канал).
- **Офлайн:** Минимум — просмотр профилей и сохранённых диалогов; чат — только онлайн.
- **Безопасность:** Шифрование трафика, хранение токенов по best practices, соответствие GDPR/локальным правилам при работе с персональными данными.
- **API:** Backend для аутентификации, хранения диалогов, проверки подписки; интеграция с LLM-провайдером (промпты под каждого персонажа из команды).

### Голосовой ввод и ответ (микрофон + текст/аудио)

| Элемент | Поведение |
|--------|-----------|
| **Кнопка «Микрофон»** | Рядом с полем ввода. Нажал — идёт запись голоса. По окончании (или по повторному нажатию) голос распознаётся в текст (Speech-to-Text), текст подставляется в поле; пользователь может отредактировать и отправить. |
| **Ввод** | Всегда уходит на сервер как текст (распознанный или введённый вручную). |
| **Формат ответа** | Переключатель или иконки в чате: **«Текст»** — ответ персонажа только текстом в пузыре; **«Аудио»** — к ответу генерируется озвучка (Text-to-Speech), в пузыре показывается текст + кнопка воспроизведения. Выбор можно сохранять в настройках (по умолчанию: текст). |
| **Воспроизведение** | Для сообщений с аудио: кнопка Play/Pause, прогресс, при желании — скорость воспроизведения. |

**Технически:** Speech-to-Text и Text-to-Speech — на устройстве (нативные API) или через облако (нужна политика конфиденциальности и офлайн-запасной вариант).

### Интеграции
- Платёжная система: App Store / Google Play In-App Purchases (подписки).
- Аналитика: события онбординга, выбора персонажа, отправки сообщения, показа/покупки подписки.
- Речь: Speech-to-Text (распознавание голоса), Text-to-Speech (озвучка ответов) — нативные API или облачные (Google, Apple, и т.д.).
- (Опционально) Push-уведомления: напоминания, «персонаж дня».

---

## 3. Структура экранов

```
┌─────────────────────────────────────────────────────────────┐
│ SPLASH / LOADING                                             │
│ → Проверка авторизации, подписки → Main или Onboarding       │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│ ONBOARDING (2–4 экрана)                                      │
│ 1. «Что такое LOLA» + CTA «Далее»                             │
│ 2. «Выбери темы» (психология, бизнес, творчество…)          │
│ 3. «Кого добавить первым?» — выбор 1–3 персонажей            │
│ 4. Регистрация/вход                                          │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│ MAIN (таб-бар или навигация)                                 │
│                                                              │
│  [Персонажи]     [История*]     [Совет**]     [Профиль]     │
│       │                │             │             │        │
│       ▼                ▼             ▼             ▼        │
│  Список/сетка     Список         Выбор 3      Настройки     │
│  персонажей       диалогов       персонажей   Подписка      │
│  по категориям   по дате        + общий      Уведомления    │
│  Поиск, избранное  Открыть чат    чат         Выход        │
│                                                              │
│  * Премиум  ** Премиум                                        │
└─────────────────────────────────────────────────────────────┘
                              │
         ┌────────────────────┼────────────────────┐
         ▼                    ▼                    ▼
┌─────────────────┐ ┌─────────────────────────────────────────┐ ┌─────────────────┐
│ ЭКРАН ПЕРСОНАЖА │ │ ЭКРАН ЧАТА                              │ │ ПЕЙВОЛЛ         │
│                 │ │                                         │ │                 │
│ Аватар, имя,    │ │ История сообщений (текст + при ответе   │ │ Тарифы:         │
│ цвет, описание  │ │ аудио — кнопка воспроизведения)         │ │ Free / 9.99/мес │
│ [Начать чат]    │ │                                         │ │ / 79.99/год     │
│ [В избранное]   │ │ ┌─────────────────────────────┬──────┐ │ │ Пробный период  │
│                 │ │ │ Поле ввода текста           │ [🎤]  │ │ │ [Оформить]      │
│                 │ │ │ (или текст из голоса)       │ Микро-│ │ └─────────────────┘
│                 │ │ └─────────────────────────────┴ фон   ┘ │
│                 │ │ [Отправить]                              │
│                 │ │                                         │
│                 │ │ Формат ответа: [ Текст ] [ 🔊 Аудио ]   │
└─────────────────┘ └─────────────────────────────────────────┘
                              │
                              ▼
                    ┌─────────────────┐
                    │ СОВЕТ ДИРЕКТОРОВ│
                    │ (премиум)       │
                    │ Выбор 3 персон. │
                    │ Один запрос →   │
                    │ 3 ответа в одном│
                    │ экране          │
                    └─────────────────┘
```

### Ключевые сценарии
1. **Первый запуск:** Splash → Onboarding → Регистрация → Main (персонажи).
2. **Бесплатный пользователь:** Выбор персонажа → чат → после N сообщений показ пейволла → переход на экран подписки.
3. **Премиум:** Доступ ко всем персонажам, истории, «Совету директоров»; в настройках — управление подпиской.
4. **Возврат в чат:** Main → История → выбор диалога → экран чата с загрузкой истории.

---

## 4. Следующие шаги

- Утвердить состав MVP-персонажей (5–10 из текущей команды).
- Описать промпты и системные роли для каждого персонажа под выбранный LLM.
- Выбрать стек (нативный / Flutter / React Native и backend).
- Спроектировать API: auth, диалоги, подписка, интеграция с LLM.
- Нарисовать wireframes/макеты ключевых экранов и пейволла.
- Заложить аналитику и A/B-тесты (онбординг, пейволл, тарифы).

Если нужно, могу детализировать любой блок (например, только онбординг, только пейволл или только API/промпты персонажей).
