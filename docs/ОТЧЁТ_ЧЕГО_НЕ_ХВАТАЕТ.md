# Отчёт: анализ приложения PROFI-A — чего не хватает

## 1. Функции в статусе «В разработке»

| Экран / блок | Элемент | Текущее состояние |
|--------------|---------|-------------------|
| **Личный кабинет → Аккаунт** | Смена пароля | Показ snackbar «Смена пароля — в разработке», колбэк не передаётся |
| **Личный кабинет → Аккаунт** | Привязка и отвязка фото профиля | Snackbar «Привязка фото профиля — в разработке» |
| **Личный кабинет → Аккаунт** | Двухфакторная аутентификация | Snackbar «В разработке» |
| **Личный кабинет → Аккаунт** | Удаление аккаунта | Диалог подтверждения есть, действие — snackbar «В разработке» |
| **Справочники** | Материалы, Виды комнат, Этапы | Заглушка: «Раздел в разработке. Здесь будет список справочных данных.» (`catalog_placeholder`) |
| **Виды работ (вкладки)** | Общие данные, Материалы | Placeholder-экран (`GeneralDataPlaceholder`, `MaterialsPlaceholder`) |

---

## 2. Авторизация и аккаунт

| Что проверено | Результат |
|---------------|-----------|
| **AuthScreen** | Кнопки «Войти» и «Зарегистрироваться» вызывают один и тот же `onAuthComplete` — реальной проверки логина/пароля и регистрации нет |
| **Смена пароля** | Нет экрана и нет API |
| **Фото профиля** | Нет загрузки/привязки/отвязки аватара в профиле |
| **Удаление аккаунта** | Нет вызова бэкенда и очистки локальных данных |
| **Выход из аккаунта** | В меню/профиле явного «Выйти» нет (есть только в калькуляторе и диалогах несохранённых изменений) |

---

## 3. Строковые ресурсы (strings.xml)

### 3.1 Используемые ключи — все присутствуют в `values/strings.xml`

Проверены все вызовы `stringResource(R.string.*)` — соответствующие ключи в `strings.xml` есть.

### 3.2 Жёстко заданные тексты (нет в strings)

Рекомендуется вынести в ресурсы для локализации и единообразия:

| Где | Текст |
|-----|--------|
| ProfileScreen | «Профиль», «О компании», «Реквизиты», «КС-2 / КС-3», «Аккаунт», «Смена пароля», «Привязка и отвязка фото профиля», «Двухфакторная аутентификация», «Удаление аккаунта», «Удалить», текст диалога удаления |
| SimpleCalculatorDialog | «Закрыть», «Простой калькулятор» |
| AddRoomScreen | «Название комнаты», «Фото 3D», «Длина», «Ширина», «Высота», «Площадь пола/потолка/стен», «Добавить откос», «Добавить короба», «Наименование работы *», «Ед. изм. *», «Цена, ₽ *», «Кол-во *», сообщения Toast при валидации |
| SupportScreen | «Контактная информация», «Форма обращения», «Номер телефона *», «Описание проблемы *», «Прикрепить файл», «Обязательное поле», «Введите корректный email» |
| AboutScreen | «Название: PROFI-A», «Версия: 1.0.0», описание приложения, дата, разработчик, копирайт |
| SettingsScreen | Значения по умолчанию (город, валюта, язык, единицы) — списки заданы в коде |
| Другие экраны | Отдельные подписи кнопок и полей (Редактировать, Сохранить и т.д.) — часть уже в strings, часть захардкожена |

### 3.3 Локализация (values-en)

Есть `values-en/strings.xml` — основные ключи продублированы. Все новые строки из п. 3.2 нужно добавить и в `values`, и в `values-en`.

---

## 4. Навигация и маршруты

| Маршрут | Реализация |
|---------|------------|
| SPLASH, SPECIALTY, BUSINESS_TYPE, AUTH | Есть |
| HOME, PROFILE, SETTINGS, SUBSCRIPTION, SUPPORT, ABOUT | Есть |
| MATERIALS, WORKS, ROOM_TYPES, STAGES | Экраны есть, контент — заглушки |
| FORM_KS2_KS3, ACTS, GENERAL_ESTIMATE, FINAL_ESTIMATE | Есть |
| edit_profile/{section} | Есть (profile, company, requisites) |
| FOREMAN (Добавить прораба) | ForemanInviteScreen — нужно проверить полный функционал (приглашения, ссылки) |

Отдельного маршрута для «Смена пароля» нет — при реализации понадобится новый route и экран.

---

## 5. Ключевые функции по экранам

| Экран | Что есть | Чего не хватает |
|-------|----------|------------------|
| **Калькулятор (SimpleCalculatorDialog)** | Цифры, +, −, ×, ÷, =, C, Закрыть, Применить | Процент (%), сохранение истории, копирование результата в буфер |
| **Добавление комнаты** | Название, размеры, откосы/короба, виды работ, сохранение | Валидация «Редактировать номер»; реальная привязка «Фото 3D» к данным комнаты (сейчас только копирование файла) |
| **Подписка** | Выбор тарифа, промокод, кнопки оплаты (QR/телефон) | Реальная интеграция оплаты (BillingManager есть — нужно проверить подключение к серверу/магазину) |
| **Тех. поддержка** | Форма (телефон, email, описание, вложение) | Отправка на бэкенд; сейчас только Intent с email — зависимость от почтового клиента |
| **Настройки** | Город, валюта, язык, единицы измерения | Сохранение в DataStore есть; применение языка/валюты в приложении (перезапуск, обновление списков) |
| **КС-2 / КС-3** | Формирование акта, выбор проекта/акта, PDF/CSV | Проверить подписание (signedByContractor/Customer) и экспорт подписей |

---

## 6. Данные и бэкенд

| Компонент | Наличие | Примечание |
|-----------|---------|------------|
| Room (локальная БД) | Есть | Проекты, комнаты, работы, акты, профиль |
| DataStore | Есть | Настройки, тип аккаунта, профиль пользователя |
| Сетевой слой (API) | Не обнаружен | Нет явного репозитория для логина, регистрации, смены пароля, удаления аккаунта, загрузки фото |
| BillingManager | Есть | Нужна проверка: лицензия/подписка и привязка к серверу/магазину приложений |

---

## 7. Мелкие замечания по коду

| Файл | Замечание |
|------|-----------|
| EstimateExport.kt | Предупреждения: `paintBody` не используется, инициализатор `tableHeaderY` избыточен; параметр `totalSum` в экспорте не используется (итог считается по строкам) — можно оставить для совместимости или убрать из сигнатуры |
| SubscriptionScreen.kt | Предупреждение: «Parameter 'totalSum' is never used» — если есть, убрать неиспользуемый параметр |
| AddRoomScreen, GeneralEstimateScreen, ActsScreen и др. | Много сообщений Toast и Snackbar на русском в коде — лучше вынести в `strings.xml` |

---

## 8. Рекомендуемый порядок доработок

1. **Высокий приоритет**  
   - Реализовать или заглушить с чётким UX: смена пароля, удаление аккаунта (хотя бы локальный выход + очистка данных).  
   - Подключить/проверить авторизацию: реальный логин/регистрация или явный «демо-режим».

2. **Средний приоритет**  
   - Справочники: материалы, виды комнат, этапы — либо реальные списки (локально/с сервера), либо убрать пункты из меню.  
   - Фото профиля: выбор фото и сохранение ссылки/файла в профиле.  
   - Вынести все пользовательские тексты в `strings.xml` (и RU, и EN).

3. **Низкий приоритет**  
   - Двухфакторная аутентификация.  
   - Доработки калькулятора (%, история).  
   - Отправка формы поддержки на бэкенд вместо только email Intent.

---

*Отчёт сформирован по коду приложения PROFI-A. Дата анализа: 19.02.2026.*
