# Анализ меню и сравнение с задачей

Дата: 20.02.2026

---

## 1. Текущая структура бокового меню (drawer)

**Файл:** `app/src/main/java/ru/profia/app/ui/components/NavigationDrawer.kt`

### 1.1. Первая группа (после логотипа)
| Пункт           | Маршрут      | Иконка    |
|-----------------|--------------|-----------|
| Мой профиль     | `profile`    | Person    |
| Мои проекты     | `home`       | Folder    |
| Калькулятор     | `calculator` | Calculate |
| Добавить прораба| `foreman`    | Build     |

### 1.2. Справочники (references)
| Пункт            | Маршрут      | Иконка      |
|------------------|--------------|-------------|
| Материалы        | `materials`  | ShoppingCart |
| Виды работ       | `works`      | Build       |
| Типы помещений   | `room_types` | Home        |
| Этапы            | `stages`     | Timeline    |

### 1.3. Настройки и поддержка (settings_support)
| Пункт         | Маршрут        | Иконка        |
|---------------|----------------|---------------|
| Подписка      | `subscription` | CardMembership|
| Настройки     | `settings`     | Settings      |
| Поддержка     | `support`      | Support       |
| О приложении  | `about`        | Info          |

### 1.4. Внизу
| Пункт | Действие |
|-------|----------|
| Выход | `logout` → переход на Splash |

---

## 2. Сравнение с задачей и отчётами

### 2.1. По отчёту выполненных задач (ОТЧЁТ_ВЫПОЛНЕННЫХ_ЗАДАЧ.md)

- **1.8** — «На экране редактирования комнаты меню (гамбургер) не показывается» — **соответствует:** в `ProfiANavHost.kt` для `add_room` и для экрана проекта (`project/{projectId}`) передаётся `onMenuClick = null`, кнопка меню не отображается.
- **6.3** — «Нижняя панель с кнопкой «Калькулятор» не отображается в навигации (bottomBar отключён)» — **соответствует:** в навигации нет bottomBar, только drawer.
- **Калькулятор в навигации** — в отчёте указано: «пункт «Калькулятор» в боковом меню (drawer), переход на экран калькулятора | Выполнено».

### 2.2. Пункт «Калькулятор» в drawer (исправлено 20.02.2026)

- В **NavigationDrawer.kt** добавлен пункт **«Калькулятор»** в первую группу (иконка Calculate, маршрут `calculator`).
- В **ProfiANavHost.kt** в `onNavigate` добавлена обработка: `"calculator"` → `navController.navigate(NavRoutes.CALCULATOR) { launchSingleTop = true }`.

**Вывод:** пункт «Калькулятор» в боковом меню реализован; переход на экран калькулятора из меню работает.

---

## 3. Где показывается кнопка меню (гамбургер)

По `ProfiANavHost.kt`:

- **Меню показывается** (`onMenuClick = onOpenDrawer`): главный экран (HOME), экран калькулятора, экран редактирования раздела профиля (`edit_profile/{section}`).
- **Меню не показывается** (`onMenuClick = null`): экран проекта, создание проекта, редактирование проекта, экран комнаты (add_room), общая смета, акты, КС-2/КС-3, профиль, настройки, подписка, материалы, виды работ, типы помещений, этапы, приглашение прораба, поддержка, о приложении.

То есть гамбургер есть только на «Главной», на «Калькуляторе» и в «Редактировании профиля». Остальные экраны открываются из drawer’а или из проекта, и на них кнопки меню нет.

---

## 4. Выполненные доработки (20.02.2026)

1. **Пункт «Калькулятор» в drawer** — добавлен в первую группу меню, переход обработан в `ProfiANavHost`.
2. **Локализация** — в `CreateProjectScreen.kt` для кнопки калькулятора в шапке используется `stringResource(R.string.content_desc_calculator)`.

## 5. Дальнейшие рекомендации

- **Невыполненные блоки** (по ОТЧЁТ_НЕВЫПОЛНЕННЫХ_ЗАДАЧ.md) на структуру меню не влияют; при необходимости можно добавить в меню пункты для будущих разделов (например, 3D-сканирование), когда появятся экраны.

---

## 6. Итоговая таблица соответствия

| Требование по задаче / отчёту           | Факт в коде                         | Статус        |
|----------------------------------------|-------------------------------------|----------------|
| Гамбургер не показывается в комнате     | `onMenuClick = null` у AddRoomScreen| Выполнено      |
| BottomBar отключён                     | Нет bottomBar в Scaffold            | Выполнено      |
| Пункт «Калькулятор» в drawer            | Пункт добавлен в первую группу     | Выполнено      |
| Переход на экран калькулятора из меню   | Обработка в onNavigate             | Выполнено      |
