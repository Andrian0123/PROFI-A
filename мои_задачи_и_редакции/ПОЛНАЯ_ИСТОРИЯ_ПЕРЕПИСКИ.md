# Полная история переписки — проект PROFI-A

Документ собран из истории диалогов по проекту. Фиксирует ваши задачи (запросы) и выполненные редакции для подтверждения авторства.  
*Запросы, относящиеся к другим (сторонним) приложениям, не включались.*

---

## Раздел 1. Общие и организационные запросы

### Что осталось по проекту
**Запрос:** Что у нас осталось.  
**Редакции:** Подготовлен краткий отчёт: по отчётам формально 0 невыполненных; указано направление — бэкенд верификации покупок (POST /verify). Остальное — по желанию.

### Способ оплаты для русской версии
**Запрос:** Для русской версии — способ оплаты два варианта: QR-код и номер телефона.  
**Редакции:** В SubscriptionScreen для русской локали добавлена карточка «Способ оплаты» с вариантами «QR-код» и «Номер телефона»; выбор сохраняется в состоянии экрана.

### Оптимизация смет (PDF)
**Запрос:** Оптимизировать сметы: шрифт стандартный; выделить данные заказчика и исполнителя; итоговая сумма; добавить сетку, чтобы не путать строчки и столбики.  
**Редакции:** В экспорте PDF: стандартный sans-serif; лёгкий серый фон блоков заказчика/исполнителя; строка «Итого по работам» выделена фоном и жирным; добавлена сетка таблицы (горизонтальные и вертикальные линии). То же для exportActToPdf.

### База материалов и виды работ по Москве
**Запрос:** Найти базу строительных материалов и добавить в справки материалы с ценами; найти базу виды работы по Москве с ценами и загрузить в справки виды работы.  
**Редакции:** Изучена структура справочников «Материалы» и «Виды работ»; подбор источников и загрузка данных требовали внешних источников — в диалоге даны рекомендации.

### Справочник видов комнат
**Запрос:** Добавить справки видов комнат — все возможные варианты.  
**Редакции:** Добавлен RoomTypesReference.kt с 70+ вариантами помещений (жилые, кухня, прихожая, санузлы, балконы, подсобные и т.д.). RoomTypesScreen выводит список; в AddRoomScreen подсказки названий комнат берутся из этого справочника.

### Калибровка функций
**Запрос:** Проверяй калибровку всех функций.  
**Редакции:** Зафиксирован подход: после каждой доработки — проверка линтера/компиляции, при наличии — юнит-тесты, краткое описание проверок в ответе.

---

## Раздел 2. Ошибки сборки и импорты

### Unresolved reference: ExitToApp, Spacer, height, width
**Запрос:** (по скриншоту ошибок сборки).  
**Редакции:** NavigationDrawer — иконка «Выйти» заменена на Logout (outlined); GeneralEstimateScreen — добавлены импорты Spacer, height, width.

### Composable и иконка выхода
**Запрос:** (ошибки в NavigationDrawer и ActsScreen).  
**Редакции:** NavigationDrawer — использование Icons.Outlined.Logout; ActsScreen — stringResource вынесен из remember и onClick, введены discountDefaultStr, taxDefaultStr.

### Иконка Logout недоступна
**Запрос:** (Unresolved reference: Logout).  
**Редакции:** Иконка «Выйти» заменена на Icons.Default.Close (доступна в базовом наборе).

### Unresolved reference: fillMaxHeight
**Запрос:** (ошибка в BaseScreen.kt).  
**Редакции:** Добавлен импорт fillMaxHeight в BaseScreen.kt.

### Предупреждения компиляции (EstimateExport, ProfileScreen)
**Запрос:** (по скриншоту предупреждений).  
**Редакции:** @Suppress("UNUSED_PARAMETER") для totalSum в экспорте; @Suppress("RedundantVariableInitializer") для tableHeaderY; для onSubscribeClick в ProfileScreen — аналогично.

### Ошибка Expecting '}' в AuthScreen
**Запрос:** (по скриншоту).  
**Редакции:** Добавлена недостающая закрывающая скобка для Box в AuthScreen.kt.

### ScanProcessingApi, BuildConfig, Hilt
**Запрос:** (каскад ошибок kapt).  
**Редакции:** Проверка BuildConfig.SCAN_SERVER_URL; возврат hilt-compiler с correctErrorTypes = true.

### Ошибки в AddOpeningDialog, BaseScreen, RoomScanScreen, SimpleCalculatorDialog, WorkCategoryScreen
**Запрос:** (по скриншоту списка ошибок).  
**Редакции:** Добавлены импорты (dp, MaterialTheme, IconButton, ExperimentalMaterial3Api); в RoomScanScreen — LocalLifecycleOwner, вынос MaterialTheme из Canvas; в SimpleCalculatorDialog — consume(); в WorkCategoryScreen — IconButton.

### EntityMapper discountText/taxPercentText, ensureDefaultCurrencyFromLocale
**Запрос:** (по скриншоту 4 ошибок сборки).  
**Редакции:** Убраны discountText и taxPercentText из маппера в ProjectData; в PreferencesDataStore добавлен ensureDefaultCurrencyFromLocale(), в PreferencesRepository — вызов; в ActsScreen — Locale.forLanguageTag вместо Locale("ru").

---

## Раздел 3. UI: кнопки, экраны, навигация

### Удалить две кнопки «Добавить откос» и «Добавить короба»
**Запрос:** Удалить эти две клавиши; добавить откос и добавить короба.  
**Редакции:** Удалён Row с двумя OutlinedButton «Добавить откос» / «Добавить короба»; настройка откосов и коробов остаётся через переключатели и поля длины.

### Убрать значки скидка и налог с экрана сметы
**Запрос:** Убрать значки «Скидка» и «Налог» с этого экрана.  
**Редакции:** Кнопки «Скидка» и «Налог» с иконками убраны с экрана предварительной сметы; осталась одна кнопка «Создать промежуточную смету».

### Кнопки «Добавить откос» и «Добавить короба» в начале списка видов работ
**Запрос:** Кнопки «Добавить откос» и «Добавить короба» разместить в начале списка видов работ (где указано стрелкой).  
**Редакции:** В AddRoomScreen под заголовком «Виды работы» добавлен Row с кнопками «Добавить откос» (раздел Окна, Откос, п.м.) и «Добавить короба» (Прочие работы, Короба, п.м.).

### Калькулятор: мини, без заголовка, плюс/минус/умножить/делить/удалить
**Запрос:** Убрать строку «Простой калькулятор», сделать мини-версию; добавить отсутствующие элементы: плюс, минус, удалить, умножить, разделить.  
**Редакции:** Заголовок убран; мини-версия (fillMaxWidth(0.6f)); кнопки +, −, ×, ÷, C, ⌫ (backspace); кнопка «Удалить» (⌫) добавлена.

### Калькулятор — плавающее окно
**Запрос:** Калькулятор в всплывающем окне, «водяного» типа, с возможностью перемещать по экрану; начальное положение — в указанном месте экрана.  
**Редакции:** Диалог позиционируется в правом верхнем углу; добавлено перетаскивание (detectDragGestures, offsetX/offsetY).

### Ошибка consume в калькуляторе
**Запрос:** (по скриншоту ошибки).  
**Редакции:** change.consumeAllChanges() с корректным импортом; импорты приведены в порядок, добавлен TextButton.

### Сканирование: кнопки «Назад» и «Сохранить» (галочка)
**Запрос:** После сканирования и появления предварительных размеров: справа (галочка) — сохранить в раздел «Файлы»; слева (стрелка) — назад.  
**Редакции:** В состоянии SHOW_DIMENSIONS добавлены кнопки: слева «Назад» (popBackStack), справа «Сохранить» с галочкой (markScanReady + popBackStack).

### Паутина при сканировании
**Запрос:** При сканировании помещения создать «паутину» для уже отсканированных участков, чтобы видеть, что осталось.  
**Редакции:** В RoomScanScreen добавлена сетка 4×4 с подсветкой ячеек по мере «прохода»; состояние coverage, LaunchedEffect для заполнения; отрисовка поверх CameraPreviewWithGrid.

### Импорт width в RoomScanScreen
**Запрос:** (ошибка Unresolved reference: width).  
**Редакции:** Добавлен импорт layout.width в RoomScanScreen.kt.

### Раздел «Аккаунт»: смена пароля, язык, 2FA, удаление
**Запрос:** Доработать раздел «Аккаунт»: смена пароля; язык — переводы для всех выбранных языков; доработать файлы двухфакторной идентификации.  
**Редакции:** Добавлен ChangePasswordScreen (поля текущий/новый/повтор пароля, валидация, кнопка «Сохранить»); маршрут CHANGE_PASSWORD; строки RU/EN; заготовка TWO_FA; навигация из профиля.

### Удалить строку «Привязка и отвязка фото профиля»
**Запрос:** Удалить строку «Привязка и отвязка фото профиля».  
**Редакции:** Удалён UI-элемент и параметр onProfilePhoto из ProfileScreen.

### Проверка задач по калькулятору
**Запрос:** Проверь задачи по калькулятору; ядро выполнить согласно требованию.  
**Редакции:** Проверка: цифры 0–9, +, −, ×, ÷, =, C, ⌫, «Закрыть», «Применить»; мини без заголовка; плавающее окно. Добавлена локализация кнопок (calculator_apply, close).

### Предупреждения сборки (калькулятор, RoomScan, AddWorkTypes, WorkCategory, Theme)
**Запрос:** (по скриншоту предупреждений).  
**Редакции:** SimpleCalculatorDialog — consume(); RoomScanScreen — @Suppress для projectId/roomId, LocalLifecycleOwner, ArrowBack AutoMirrored, factory; AddWorkTypesScreen, WorkCategoryScreen — AutoMirrored иконки; Theme — @Suppress DEPRECATION для statusBarColor.

### Hilt kapt warning
**Запрос:** Убрать предупреждение kapt.  
**Редакции:** В build.gradle.kts заменён на hilt-android-compiler, добавлен correctErrorTypes = true; при каскаде ошибок возвращён hilt-compiler.

### Логотип: по центру, убрать букву «А», сократить высоту блока на 50%
**Запрос:** Логотип разместить по середине; убрать букву (А); блок слишком высокий — сократить на 50%.  
**Редакции:** В BaseScreen логотип по центру (Box fillMaxWidth, Center); у LogoSquare добавлен showLetter = false; TopAppBar height 40.dp, логотип 20.dp.

### Кнопка «Закрыть» в калькуляторе — крестик сверху
**Запрос:** Кнопку «Закрыть» разместить сверху в виде крестика; анализировать недостающие элементы.  
**Редакции:** В верхней части калькулятора справа добавлена IconButton с Icons.Default.Close; кнопка «Закрыть» внизу убрана; закрытие только крестиком.

### Кнопка «Сохранить комнату» — галочка справа, «Назад» — стрелка слева
**Запрос:** Кнопку «Сохранить комнату» разместить наверху справа в виде галочки; слева — «Назад» в виде стрелки.  
**Редакции:** В BaseScreen добавлен параметр saveAsCheckIcon; для экрана комнаты — галочка справа (сохранение + popBackStack); слева — стрелка назад; нижняя кнопка «Сохранить комнату» убрана.

### Скидка и ИП: сократить подпись, «Свой вариант», переименовать налог в «% ИП»
**Запрос:** Сократить «Скидка»; при выборе — поле ввести свой вариант скидки; (Налог) переименовать в «% ИП»; добавить поле свой вариант; при формировании сметы указать налоговый процент.  
**Редакции:** Подпись «Скид.» (discount_label_short); в меню пункт «Свой вариант» и поле ввода; «% ИП» (tax_label_ip), свой вариант ИП; в экспорт акта (PDF/CSV) добавлены discountText, taxPercentText и строки «Скидка: X%», «Налоговый процент (ИП): X%».

### Надпись проекта в верхней части экрана
**Запрос:** На верхней части экрана добавить надпись проекта.  
**Редакции:** В BaseScreen при непустом title он выводится в шапке; на экранах проекта, сметы, актов, комнаты передаётся название проекта (из ViewModel/репозитория).

### Адаптировать все экраны под надпись проекта
**Запрос:** Адаптировать все экраны под этих задачи.  
**Редакции:** EditProjectScreen, RoomScanScreen, KS2Screen, KS3Screen — загрузка названия проекта и передача в title; добавлен ProjectTitleViewModel для KS2/KS3.

### Общая стоимость разместить внизу
**Запрос:** Общую стоимость разместить внизу.  
**Редакции:** Блок «Общ. стоимость» и «Изменить проект» перенесены в самый низ экрана проекта (после списка комнат).

### Кнопка «Изменить проект» — карандаш справа в блоке
**Запрос:** Кнопку сделать в виде карандаша и разместить в блоке справа.  
**Редакции:** Текст «Изменить проект» заменён на иконку карандаша (Icons.Default.Edit); иконка перенесена в карточку проекта справа; внизу убрана.

### Стрелка и галочка одного размера, одинаковое расстояние от краёв
**Запрос:** Оптимизировать кнопки стрелка и галочка — одинакового размера, расстояние от краёв.  
**Редакции:** В BaseScreen для IconButton заданы size(48.dp), иконки size(24.dp); padding(start = 8.dp) слева, padding(end = 8.dp) справа.

### Клавиатура и кнопка «Далее»
**Запрос:** Клавиатура должна появляться только при нажатии на поле; при нажатии «Далее» переходить на следующее поле или строку.  
**Редакции:** Клавиатура уже по фокусу; для полей AddRoomScreen заданы KeyboardOptions(imeAction = ImeAction.Next) и KeyboardActions(onNext = { focusManager.moveFocus(Next) }).

### Кнопка «Сканировать» — открыть фото/файл
**Запрос:** Кнопка «Сканировать» должна открывать выбор фото или файла для сканирования документа/файла.  
**Редакции:** По нажатию «Сканировать» открывается GetContent (*/*); выбранный файл копируется в кэш и отправляется на анализ; при ошибке — строка scan_pick_file_error.

### Кнопка «Добавить проём» ниже блока «Прочие работы»
**Запрос:** Кнопку «Добавить проём» разместить ниже блока «Прочие работы».  
**Редакции:** Кнопка «Добавить проём» и список проёмов перенесены ниже «Прочие работы» и выше блока «Расчёты».

### Не видно бургер-меню
**Запрос:** Не вижу бургер на экране.  
**Редакции:** Высота TopAppBar при наличии кнопки увеличена до 48.dp; для HomeScreen гарантирована передача onMenuClick (не null), чтобы иконка меню отображалась.

### Оптимизировать верхнюю панель
**Запрос:** Оптимизировать верхнюю часть панель чтобы разместить.  
**Редакции:** (Уточнение по контексту — компактное размещение элементов в TopAppBar.)

---

## Раздел 4. Сметы, акты, экспорт, скидка и ИП

### Учёт скидки и ИП при формировании
**Запрос:** При формировании учитывать скидку (минус выбранный % от суммы) и/или ИП (плюс выбранный % к сумме). «Итого по работам» — базовая сумма; при скидке/ИП показывать «Итого к оплате».  
**Редакции:** В EstimateExport (PDF и CSV): строка «Итого по работам», при скидке — «Скидка (Y%):», при ИП — «С учётом ИП (Y%):», при скидке/ИП — «Итого к оплате». Строки estimate_discount_label, estimate_total_with_tax_label, estimate_total_to_pay, estimate_total_works_label. В диалоге акта (ActsScreen) — та же логика.

### Порядок видов работ по блокам
**Запрос:** Порядок видов работ учитывать блоки: первый — потолок, второй — стены, третий — пол и т.д.  
**Редакции:** В GeneralEstimateViewModel введён WORK_BLOCK_ORDER (Потолок, Стены, Пол, Двери, …); при формировании секций позиции сортируются по workBlockOrder(category), затем по name.

### Проверка логики скидки и ИП; парсинг «НДС 20%»
**Запрос:** Проверить: ИП — плюс % к сумме; «Итого по работам» — базовая сумма; при скидке/ИП — «Итого к оплате».  
**Редакции:** Обнаружена ошибка: для ИП в меню строка «НДС 20%», парсер не извлекал число. В EstimateExport parsePercent переписан — извлечение числа по regex из «5%», «НДС 20%». В ActsScreen добавлена parsePercentFromDisplayText с той же логикой.

---

## Раздел 5. Заглушки, ProjectData, скролл, прозрачность

### Заглушки по экранам
**Запрос:** Доработать заглушки: RoomScanScreen — «Отметить участки на плане»; ChangePasswordScreen — «Сбросить пароль»; AddWorkTypesScreen — вкладки «Общие данные» и «Материалы».  
**Редакции:** Toast/диалог для «Отметить участки на плане»; диалог для «Сбросить пароль»; в плейсхолдерах вкладок — catalog_placeholder.

### Ошибка ProjectDetailScreen Expecting '}'
**Запрос:** Ошибка сборки в ProjectDetailScreen (Expecting '}').  
**Редакции:** Добавлена недостающая закрывающая `}` для внешнего Column.

### 12 ошибок компиляции (weight, Composable)
**Запрос:** Исправить вызовы @Composable не из composable-контекста и «Cannot access weight: it is internal».  
**Редакции:** Удалён импорт weight в затронутых файлах; в AddWorkTypesScreen и EditProfileSectionScreen строки для snackbar/кнопки берутся в composable-контексте и передаются в лямбды.

### Читаемость скроллов
**Запрос:** Убрать полупрозрачность — скроллы и поверхности непрозрачные.  
**Редакции:** В Color.kt заданы непрозрачные Surface и SurfaceVariant; в Theme и экранах — непрозрачный фон для скроллов и карточек.

### Адаптация под диагональ
**Запрос:** Автоматическая адаптация под разные размеры экрана.  
**Редакции:** В WindowFormFactor введены Compact/Medium/Expanded и отступы/ограничение ширины контента.

### Unresolved reference: name (ProjectData)
**Запрос:** Ошибка «Unresolved reference: name» в 7 файлах.  
**Редакции:** В ProjectData добавлено displayName; везде project?.name заменено на project?.displayName.

### Логика в актах — ИП «плюс»
**Запрос:** Выбранный процент ИП должен прибавляться к сумме в актах и отображаться.  
**Редакции:** В exportActToPdf и exportActToCsv добавлена строка «С учётом ИП (X%): … ₽»; в диалоге акта — та же логика.

### FormKs2Ks3: иконка глаза, дата/время, кнопка «Сформировать и поделиться»
**Запрос:** Иконка «глаз» для просмотра промежуточной сметы; убрать дублирование даты/времени; кнопка «Сформировать и поделиться» и выбор формата с подсказкой.  
**Редакции:** Иконка Visibility у каждого акта, диалог ViewActDialog; одна строка даты/времени; кнопка «Сформировать и поделиться»; диалог выбора формата с текстом про отправку.

---

## Раздел 6. Меню, скролл, калькулятор, поделиться

### Анализ меню и сравнение с задачей
**Запрос:** Анализируем наше меню и сравни с задачей для выполнения дальнейших указаний.  
**Редакции:** Создан docs/АНАЛИЗ_МЕНЮ_И_ЗАДАЧА.md; выявлено отсутствие пункта «Калькулятор» в drawer — добавлен пункт и маршрут calculator; в CreateProjectScreen — stringResource для калькулятора; отчёты обновлены.

### Скролл по проекту
**Запрос:** Проверь скролл во всём проекте, анализируй недочёты.  
**Редакции:** Создан docs/АНАЛИЗ_СКРОЛЛА_ПО_ПРОЕКТУ.md; в ProjectDetailScreen, GeneralEstimateScreen, StagesScreen, RoomTypesScreen, WorkCategoryScreen — Column(fillMaxSize), LazyColumn(weight(1f)); добавлены импорты fillMaxSize и weight.

### Режим калькулятора как скролл
**Запрос:** Режим калькулятор сделать как скролл.  
**Редакции:** В CalculatorScreen контент обёрнут в Column с verticalScroll(rememberScrollState()).

### Калькулятор из меню — тот же SimpleCalculatorDialog
**Запрос:** Чтобы основной экран использовал всплывающий SimpleCalculatorDialog с историей.  
**Редакции:** При переходе в «Калькулятор» из меню сразу открывается SimpleCalculatorDialog; при закрытии — возврат назад; добавлена строка calculator_open_hint.

### ИИ-подсказки видов работ из других комнат
**Запрос:** После создания комнаты в скролле предложить добавить виды работ, которые использовались в других объектах, для быстрого формирования предварительной сметы.  
**Редакции:** SuggestedWorkItem, getSuggestedWorkItemsFromOtherRooms в репозитории; в AddRoomViewModel — suggestedWorkItems; на AddRoomScreen блок «Добавить из других комнат проекта» с кнопками по категориям; при нажатии — добавление с подстановкой цены и количества по площади.

### Кнопка «Поделиться» — варианты
**Запрос:** Кнопка «Поделиться» должна иметь варианты.  
**Редакции:** На GeneralEstimateScreen и в диалоге акта по нажатию «Поделиться» открывается выпадающее меню с пунктами «PDF» и «Excel (CSV)».

### Дублирующая кнопка «Добавить комнату»; не видно сформированные комнаты
**Запрос:** Убрать дублирующую кнопку «Добавить комнату» снизу; не видно сформированные комнаты.  
**Редакции:** Убрана вторая кнопка «Добавить комнату» внизу; одна кнопка остаётся в ряду с «Предварительная смета» и «Акты»; список комнат с weight(1f) для прокрутки.

### Блок уже (сделать меньше)
**Запрос:** Сделать блок меньше (слишком широкий).  
**Редакции:** Ограничение ширины контента 480.dp по центру; боковые отступы 24.dp.

### Проект с самого верха
**Запрос:** Проект должен начинаться с самого верха.  
**Редакции:** Убран верхний отступ у контента экрана проекта (top = 0.dp).

### Кнопки в один ряд, надпись «Добавить комнату» сократить слева
**Запрос:** Разместить кнопки в один ряд; надпись сокращённая «Добавить комнату» слева.  
**Редакции:** Три кнопки в одном Row с weight(1f); третья — «Доб. комнату» (add_room_button_short), выравнивание по левому краю.

### Общая стоимость сокращённо в одном месте
**Запрос:** Общую стоимость сокращённо разместить в этом месте.  
**Редакции:** «Общ. стоимость: X ₽» и «Изменить проект» в одной строке под карточкой; нижний блок с «Общая стоимость проекта» убран; добавлена project_total_cost_short.

### Предложенные виды работ — только вид работы и стоимость
**Запрос:** В предложенном должно быть видно только вид работы и стоимость.  
**Редакции:** Подпись кнопок подсказок: «название · XXX ₽» (без «в N комн.»).

### Подсказки обводить (как на фото)
**Запрос:** Выделить подсказки — обводить, как на фото.  
**Редакции:** У кнопок-подсказок добавлена обводка (border 1.dp, outline, скругление 8.dp).

---

## Раздел 7. Язык сметы, валюта, подписка

### Язык сметы — переименовать в «Язык», сократить до двух букв
**Запрос:** Язык сметы переименовать в (язык) и сократить до двух букв; выбранные языки сократить до двух букв.  
**Редакции:** Подпись «Яз» (estimate_language_short); коды языков Ру, En, De, Ro (estimate_language_*_short); в кнопке выбора показывается короткий вариант.

### Подписка — автоматический выбор национальной валюты по локали
**Запрос:** Подписка — автоматически выбрать национальную валюту исходя из локации.  
**Редакции:** LocaleCurrencyHelper (RUR/USD/EUR по стране); ensureDefaultCurrencyFromLocale в DataStore; вызов при старте триала и при открытии настроек; на экране подписки цены через formatPrice(settings.currency).

### Совместить «Яз/Ру» и «Вал/Руб»
**Запрос:** Совмещать вот так (яз/ру).  
**Редакции:** На экране актов один ряд: «Яз/Ру» (выбор языка) и «Вал/Руб» (валюта из настроек); estimate_currency_short, getCurrencyShortLabel в LocaleCurrencyHelper.

---

## Раздел 8. Аналитика, отчёты, планы

### Анализ пути «Новый проект → комнаты», все функции и задачи
**Запрос:** Анализируй путь: Новый проект, комнаты, все функции, все задачи; недостающее и что можно улучшить или добавить.  
**Редакции:** Создан docs/АНАЛИЗ_ПРОЕКТА_КОМНАТЫ_И_ЗАДАЧИ_2026-02-20.md: структура, комнаты, недостающее (Auth, 3D E2E, Support, контент вкладок), улучшения (площадь пола из скана, пункт Калькулятор в drawer).

### По порядку: площадь пола из скана, калькулятор, отчёт
**Запрос:** Давай по порядку.  
**Редакции:** Подстановка площади пола из 3D-скана в RoomScanScreen (roomScanFloorAreaM2) и в AddRoomScreen (floorAreaStr); пункт в отчёте; калькулятор в drawer уже был.

### P0 Auth — по порядку
**Запрос:** Начинаем с первого пункта и идём по порядку.  
**Редакции:** Реализованы сохранение сессии (DataStore), передача токена в API, проверка сессии на сплэше, смена пароля и 2FA с заголовком Authorization, удаление аккаунта (ProfileViewModel + API), выход с очисткой сессии.

### Список задач и не доработанных ресурсов
**Запрос:** Анализируй наши задачи и составь список; также составить список не доработанных ресурсов.  
**Редакции:** Создан docs/СПИСОК_ЗАДАЧ_И_РЕСУРСОВ_2026-02-20.md: задачи по приоритетам, захардкоженные строки, contentDescription, заглушки, dev-строки, локали values*.

### Доработать сейчас: локализация, сообщение смены пароля, отчёты
**Запрос:** Что мы можем доработать сейчас.  
**Редакции:** password_changed_success; content_desc_edit/delete/add_work; AddRoomScreen (add_room_calculations, add_opening, photo_3d); STATUS_ЗАДАЧ_CANONICAL и ОТЧЁТ_НЕВЫПОЛНЕННЫХ обновлены.

### Пункты задач выполнить по очереди
**Запрос:** Составить пункты задач и выполнить по очереди.  
**Редакции:** Локализация подписей расчётов в AddRoomScreen; «Отмена» в GeneralEstimateScreen; required_field в Edit/CreateProjectScreen; новые ключи в values-de, ro, uz, tg, kk; обновление СПИСОК_ЗАДАЧ_И_РЕСУРСОВ.

### Отчёт «Что не хватает»
**Запрос:** Анализируй все клавиши, все функции, все значения и делай отчёт — что не хватает.  
**Редакции:** Создан docs/ОТЧЁТ_ЧЕГО_НЕ_ХВАТАЕТ.md: функции в разработке, авторизация, строковые ресурсы, навигация, калькулятор/подписка/поддержка/настройки, бэкенд, замечания по коду.

### Общая сумма в столбике
**Запрос:** Общая сумма разместить в этом столбике.  
**Редакции:** В PDF сметы и акта подпись «Итого по работам:» слева, значение в рублях — в столбце «Сумма» справа (COL_SUM_RIGHT).

### Взять аналитику «Что не хватает» и доработать пошагово
**Запрос:** Берём аналитику «Что не хватает» и дорабатываем пошагово все недостающие.  
**Редакции:** EstimateExport — подавление предупреждений; строки для профиля/аккаунта/калькулятора; пункт «Выйти» в меню с вызовом logout.

### Сетка и координация в PDF
**Запрос:** Проверь правильно ли сформированы сетка и координация.  
**Редакции:** Проверка координат; исправлено выравнивание заголовка «Сумма» и столбца сумм по TABLE_RIGHT (555).

### PROFI-A Future-Generation Strategy (план)
**Запрос:** Выполнить план (стратегия для будущего поколения); в автономном режиме до публикаций.  
**Редакции:** Манифест v1 (docs/FUTURE_GENERATION_MANIFESTO_V1.md); канонические цвета (Color.kt, colors.xml, themes.xml, BRAND_COLOR_SYSTEM.md); P0 backend (AuthAccountApi, SupportApi, репозитории, ViewModel, экраны); quality gates (check_i18n_parity.py, android-quality-gates.yml, QUALITY_GATES.md); governance (GOVERNANCE_ROADMAP_2026.md). Синхронизация цветов; STATUS_ЗАДАЧ_CANONICAL.md.

---

## Раздел 9. Экспорт PDF/CSV, таблица, материалы

### Название комнаты в PDF — менее заметно, без заливки
**Запрос:** Название комнаты делать менее заметно, без заливки.  
**Редакции:** В EstimateExport для названий комнат отдельный стиль: обычный шрифт, 9 pt, Color.GRAY, без фона.

### Сумма не совпадает в столбиках
**Запрос:** Сумма не совпадает в столбике столбики.  
**Редакции:** Итог в PDF/CSV считается по экспортируемым строкам (computedTotal/computedTotalAct), а не по переданному totalSum; итог и столбец «Сумма» совпадают.

### Разделитель столбцов в PDF ближе
**Запрос:** В столбике есть ошибка; разделитель сделать ближе.  
**Редакции:** Колонки Кол-во/Цена/Сумма сдвинуты (318, 358, 448), зазоры уменьшены.

### Кнопки «Добавить откос» и «Добавить короба» в блоке видов работ
**Запрос:** Кнопки «Добавить откос» и «Добавить короба» расположить в этом месте.  
**Редакции:** Под заголовком «Виды работы» добавлен Row с двумя OutlinedButton; «Добавить откос» → Окна, Откос, п.м.; «Добавить короба» → Прочие работы, Короба, п.м.

### Калькулятор: кнопка «Закрыть» и плюс/минус/умножить/разделить
**Запрос:** Кнопку «Закрыть» добавить в указанном месте; отсутствуют клавиши плюс, минус, умножить, разделить.  
**Редакции:** В шапке калькулятора добавлена кнопка «Закрыть»; добавлены клавиши × и ÷; раскладка 7–9+, 4–6−, 1–3×, 0,·,÷,=, C.

### Блок «Аккаунт» со всеми функциями
**Запрос:** Доделать блок «Аккаунт» со всеми функциями; анализировать и добавить нужное количество элементов.  
**Редакции:** Все пункты кликабельные: Смена пароля, Привязка фото, Смена языка (→ Настройки), 2FA, Удаление аккаунта; диалог подтверждения удаления; оформление с разделителями и стрелками.

### Список материалов на 2 этажа в PDF в отдельную папку
**Запрос:** Создать список в PDF и сохранить в отдельную папку (Сантехника ППР, Канализация РТП, Крепеж; ИТОГО 127 456,99).  
**Редакции:** Создана папка materials_2_floors с HTML-файлом списка; инструкция: открыть в браузере и сохранить как PDF. Предыдущие папки/скрипты по этой задаче удалены по запросу.

### drawVerticalGrid, LinearProgressIndicator, configuration.locales
**Запрос:** (по скриншотам ошибок).  
**Редакции:** В EstimateExport drawVerticalGrid и colXList объявлены выше drawTableHeader; в SubscriptionScreen progress = { progress }; configuration.locales — проверка через size() и [0].

### Блок «Аккаунт» — элементы
**Запрос:** (расширение блока «Аккаунт»).  
**Редакции:** (Уже отражено выше — кликабельные пункты, диалог удаления.)

---

## Раздел 10. Прочее (документы, сервисы, Python-сканер)

*Задачи по Python-сервису сканирования, отчётам о сервисах и стоимости, регистрации, анализу видео и т.п. учтены в проекте как часть экосистемы PROFI-A; детали хранятся в папках docs, отчёты, регистрация сервисов и в соответствующих модулях.*

---

*Документ собран из транскриптов диалогов. Хранить до указания об остановке записи.*
